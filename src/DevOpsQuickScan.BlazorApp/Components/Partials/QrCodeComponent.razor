@using DevOpsQuickScan.Core

<div class="card h-100">
    <h5 class="card-header d-flex align-items-center">
        <span>Scan to join session</span>
    </h5>
        
    <div class="card-body d-flex justify-content-center align-items-center">
        <img src="@QrCodeHelper.GenerateQrPngDataUrl(_joinUrl!)" 
             class="img-fluid" 
             style="max-width: 100%; height: auto;" 
             alt="Join QR code" />
    </div>
    
    <div class="card-footer text-center">
        <h5>Or join at: @_viewUrl</h5>
    </div>
</div>   

@code {
    private string? _joinUrl;
    private string? _viewUrl;

    [Parameter] public required string Url { get; set; }

    protected override void OnParametersSet()
    {
        var uri = new Uri(Url);
        _joinUrl = $"{uri.Scheme}://{uri.Host}";
        _viewUrl = uri.Host;
    }

}